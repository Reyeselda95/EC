* XC4000.LIB

.MODEL D0_TGATE UTGATE ()

.MODEL D0_GATE UGATE ()

.MODEL D0_EFF UEFF ()

.MODEL D0_GFF UGFF ()

* Xilinx X4000 I/O models

.param X4000_VDD 5.0V
.param X4000_VSS 0.0V

.subckt X4000_PWR  AGND
+	optional: VDD=$G_X4000_VDD VSS=$G_X4000_VSS
+	params:   VOLTAGE={X4000_VDD} REFERENCE={X4000_VSS}
*
VVDD  VDD VSS   {VOLTAGE}
R1    VDD AGND  1MEG
VVSS  VSS AGND  {REFERENCE}
R2    VSS AGND  1MEG
.ends
*$

.model IO_X4000 uio (
+	drvh=1649	drvl=1649
+	AtoD1="AtoD_X4000"	AtoD2="AtoD_X4000"
+	AtoD3="AtoD_X4000"	AtoD4="AtoD_X4000"
+	DtoA1="DtoA_X4000"	DtoA2="DtoA_X4000"
+	DtoA3="DtoA_X4000"	DtoA4="DtoA_X4000"
+       tswhl1=7.07ns		tswlh1=8.58ns
+       tswhl2=6.94ns		tswlh2=8.37ns
+       tswhl3=9.33ns		tswlh3=10.73ns
+       tswhl4=9.18ns		tswlh4=10.59ns
+	DIGPOWER="X4000_PWR"
+	)
*$

.model IO_X4000_OC uio (
+	drvh=20K	drvl=1649
+	AtoD1="AtoD_X4000"	AtoD2="AtoD_X4000"
+	AtoD3="AtoD_X4000"	AtoD4="AtoD_X4000"
+	DtoA1="DtoA_X4000"	DtoA2="DtoA_X4000"
+	DtoA3="DtoA_X4000"	DtoA4="DtoA_X4000"
+       tswhl1=7.07ns		tswlh1=8.58ns
+       tswhl2=6.94ns		tswlh2=8.37ns
+       tswhl3=9.33ns		tswlh3=10.73ns
+       tswhl4=9.18ns		tswlh4=10.59ns
+	DIGPOWER="X4000_PWR"
+	)
*$

.model IO_X4000_PULLUP uio (
+	drvh=5K	drvl=1649
+	AtoD1="AtoD_X4000"	AtoD2="AtoD_X4000"
+	AtoD3="AtoD_X4000"	AtoD4="AtoD_X4000"
+	DtoA1="DtoA_X4000"	DtoA2="DtoA_X4000"
+	DtoA3="DtoA_X4000"	DtoA4="DtoA_X4000"
+       tswhl1=7.07ns		tswlh1=8.58ns
+       tswhl2=6.94ns		tswlh2=8.37ns
+       tswhl3=9.33ns		tswlh3=10.73ns
+       tswhl4=9.18ns		tswlh4=10.59ns
+	DIGPOWER="X4000_PWR"
+	)
*$

.subckt AtoD_X4000  A D  DPWR DGND
+	params: CAPACITANCE=0
*
XNORM A NORM DPWR DGND AtoD_NORM_X4000
O0  NORM DGND DOX4000 DGTLNET=D IO_X4000
C1  A DGND {CAPACITANCE+0.1pF}
D1  DGND A    D74CLMP
D2  A    DPWR D74CLMP
.ends
*$
.subckt DtoA_X4000  D A  DPWR DGND
+	params: DRVL=0 DRVH=0 CAPACITANCE=0
*
X1  DPWR DGND DRVPWR DRVGND DtoA_DRIVE_X4000 
N1  A DRVGND DRVPWR DINX4000 DGTLNET=D IO_X4000
C1  A DGND {CAPACITANCE+0.1pF}
.ends
*$
*-------------------------------------------------
* X4000 Input Voltage Normilization Subcircuit
*
* This circuit normalizes the input voltage, so that
* voltages below -0.5 are '0', and above +0.5 are '1'.
* The EVt device "looks up" the threshold voltage for the 
* current power supply voltage in the table.  The data for the
* table comes from the minimum and maximum voltage transfer
* characteristics graph for the X4000.

.subckt AtoD_NORM_X4000 A ANORM DPWR DGND
*
EVt THRESHOLD 0 TABLE {V(DPWR,DGND)} = 1.5,0 3.5,0.6 5,1.5 10,3 15,4
RVt THRESHOLD 0 100k
EN  ANORM DGND VALUE = {(V(A,DGND)-V(DPWR,DGND)/2)/((V(DPWR,DGND)-2*V(THRESHOLD))+1u)}
RN  ANORM DGND 100k
Rld1 A DPWR 100MEG
Rld2 A DGND 100MEG
.ends
*$
*-------------------------------------------------
* X4000 Output Drive Subcircuit
*
* This circuit constructs the correct output drive
* resistance for the power supply voltage.  This resistance is inserted
* in series with the digital input device, and the digital input device 
* resistance is set to a low value when it is on.  The tables provide the 
* output current at 1v VDS for various values of VDD (3V is an estimate)
* from the X4000

.subckt DtoA_DRIVE_X4000 DPWR DGND DRVPWR DRVGND
*
EDRVP DRVP 0 TABLE {V(DPWR,DGND)} = 1.5,0mA 3,0.5mA 5,1.2mA 10,2.0mA 15,3.0mA
EDRVN DRVN 0 TABLE {V(DPWR,DGND)} = 1.5,0mA 3,0.5mA 5,1.5mA 10,4.0mA 15,7.0mA
RDRVP DRVP 0 1K
RDRVN DRVN 0 1K
GPWR DPWR DRVPWR VALUE = {V(DPWR,DRVPWR)*V(DRVP)}
GGND DRVGND DGND VALUE = {V(DRVGND,DGND)*V(DRVN)}
RDUM1 DPWR DRVPWR 100MEG
RDUM2 DGND DRVGND 100MEG
.ends
*$
*-------------------------------------------------
* X4000 Digital Input/Output Models

.model DINX4000 dinput (
+	s0name="0"	s0tsw=15ns	s0rlo=1 	s0rhi=80K
+	s1name="1"	s1tsw=15ns	s1rlo=40K	s1rhi=1
+	s2name="X"	s2tsw=15ns	s2rlo=800	s2rhi=800
+	s3name="R"	s3tsw=15ns	s3rlo=800	s3rhi=800
+	s4name="F"	s4tsw=15ns	s4rlo=800	s4rhi=800
+	s5name="Z"	s5tsw=15ns	s5rlo=1MEG	s5rhi=1MEG
+	)
*$
.model DOX4000 doutput (
+	s0name="X"	s0vlo=-0.5	s0vhi=0.5
+	s1name="0"	s1vlo=-3.0	s1vhi=-0.5
+	s2name="R"	s2vlo=-0.5	s2vhi=0.05
+	s3name="R"	s3vlo=-0.05	s3vhi=0.5
+	s4name="X"	s4vlo=-0.5	s4vhi=0.5
+	s5name="1"	s5vlo= 0.5	s5vhi=3.0
+	s6name="F"	s6vlo=-0.05	s6vhi=0.5
+	s7name="F"	s7vlo=-0.5	s7vhi=0.05
+	)
*$

.SUBCKT X4_BUF IN PI OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: IN_D=0 OUT_D=0

U1 LOGICEXP(3,1) DPWR DGND 
+ IN PI PO OUT
+ X4_BUF
+ IO_X4000
+ LOGIC:
+   OUT = {PO ^ (IN^PI) }

.MODEL X4_BUF UGATE (
+  TPLHMN={IN_D+OUT_D} TPHLMN={IN_D+OUT_D}
+  TPLHMX={IN_D+OUT_D} TPHLMX={IN_D+OUT_D}
+  )

.ENDS X4_BUF

*$

.SUBCKT X4_BUFG IN PI OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: IN_D=0 OUT_D=0

U1 LOGICEXP(3,1) DPWR DGND 
+ IN PI PO OUT
+ X4_BUF
+ IO_X4000
+ LOGIC:
+   OUT = {PO ^ (IN^PI) }

.MODEL X4_BUF UGATE (
+  TPLHMN={IN_D+OUT_D} TPHLMN={IN_D+OUT_D}
+  TPLHMX={IN_D+OUT_D} TPHLMX={IN_D+OUT_D}
+  )

.ENDS X4_BUFG

*$

.SUBCKT X4_BUFGS IN PI OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: IN_D=0 OUT_D=0

U1 LOGICEXP(3,1) DPWR DGND 
+ IN PI PO OUT
+ X4_BUF
+ IO_X4000
+ LOGIC:
+   OUT = {PO ^ (IN^PI) }

.MODEL X4_BUF UGATE (
+  TPLHMN={IN_D+OUT_D} TPHLMN={IN_D+OUT_D}
+  TPLHMX={IN_D+OUT_D} TPHLMX={IN_D+OUT_D}
+  )

.ENDS X4_BUFGS

*$

.SUBCKT X4_BUFGP IN PI OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: IN_D=0 OUT_D=0

U1 LOGICEXP(3,1) DPWR DGND 
+ IN PI PO OUT
+ X4_BUF
+ IO_X4000
+ LOGIC:
+   OUT = {PO ^ (IN^PI) }

.MODEL X4_BUF UGATE (
+  TPLHMN={IN_D+OUT_D} TPHLMN={IN_D+OUT_D}
+  TPLHMX={IN_D+OUT_D} TPHLMX={IN_D+OUT_D}
+  )

.ENDS X4_BUFGP

*$

.SUBCKT X4_IBUF IN PI OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: IN_D=0 OUT_D=0
*
* PI and PO are not used
*
U1 BUF DPWR DGND 
+ IN OUT
+ X4_IBUF
+ IO_X4000

.MODEL X4_IBUF UGATE (
+  TPLHMN={IN_D+OUT_D} TPHLMN={IN_D+OUT_D}
+  TPLHMX={IN_D+OUT_D} TPHLMX={IN_D+OUT_D}
+  )

.ENDS X4_IBUF


.SUBCKT X4_INV IN PI OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: IN_D=0 OUT_D=0

U1 LOGICEXP(3,1) DPWR DGND 
+ IN PI PO OUT
+ X4_INV
+ IO_X4000
+ LOGIC:
+   OUT = {PO ^ ~(IN^PI) }

.MODEL X4_INV UGATE (
+  TPLHMN={IN_D+OUT_D} TPHLMN={IN_D+OUT_D}
+  TPLHMX={IN_D+OUT_D} TPHLMX={IN_D+OUT_D}
+  )

.ENDS X4_INV


*$

.SUBCKT X4_AND2  I0 P0 I1 P1 OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 OUT_D=0

U1 LOGICEXP(5,1) DPWR DGND 
+ I0 P0 I1 P1 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ( (I0^P0) & (I1^P1) ) }

U2 PINDLY(1,0,2) DPWR DGND
+ OUT_INT
+ I0 I1
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_AND2


.SUBCKT X4_AND3  I0 P0 I1 P1 I2 P2 OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 I2_D=0 OUT_D=0

U1 LOGICEXP(7,1) DPWR DGND 
+ I0 P0 I1 P1 I2 P2 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ( (I0^P0) & (I1^P1) & (I2^P2) ) }

U2 PINDLY(1,0,3) DPWR DGND
+ OUT_INT
+ I0 I1 I2
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+		 CHANGED(I2,0), DELAY(I2_D+OUT_D,-1,I2_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_AND3


.SUBCKT X4_AND4  I0 P0 I1 P1 I2 P2 I3 P3 OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 I2_D=0 I3_D=0 OUT_D=0

U1 LOGICEXP(9,1) DPWR DGND 
+ I0 P0 I1 P1 I2 P2 I3 P3 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ( (I0^P0) & (I1^P1) & (I2^P2) & (I3^P3) ) }

U2 PINDLY(1,0,4) DPWR DGND
+ OUT_INT
+ I0 I1 I2 I3
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+		 CHANGED(I2,0), DELAY(I2_D+OUT_D,-1,I2_D+OUT_D),
+		 CHANGED(I3,0), DELAY(I3_D+OUT_D,-1,I3_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_AND4


.SUBCKT X4_AND5  I0 P0 I1 P1 I2 P2 I3 P3 I4 P4 OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 I2_D=0 I3_D=0 I4_D=0 OUT_D=0

U1 LOGICEXP(11,1) DPWR DGND 
+ I0 P0 I1 P1 I2 P2 I3 P3 I4 P4 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ( (I0^P0) & (I1^P1) & (I2^P2) & (I3^P3) & (I4^P4) ) }

U2 PINDLY(1,0,5) DPWR DGND
+ OUT_INT
+ I0 I1 I2 I3 I4
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+		 CHANGED(I2,0), DELAY(I2_D+OUT_D,-1,I2_D+OUT_D),
+		 CHANGED(I3,0), DELAY(I3_D+OUT_D,-1,I3_D+OUT_D),
+		 CHANGED(I4,0), DELAY(I4_D+OUT_D,-1,I4_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_AND5

*$

.SUBCKT X4_CY4 C7 C6 C5 C4 C3 C2 C1 C0 B1 A1 B0 A0 ADD CIN COUT COUT0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS:  A1_D=0 A0_D=0 B1_D=0 B0_D=0 ADD_D=0 CIN_D=0 COUT_D=0


UA1DLY BUF DPWR DGND A1 A1_DLY D_A1 IO_X4000
.MODEL D_A1 UGATE (TPLHMN={A1_D} TPLHMX={A1_D} TPHLMN={A1_D} TPHLMX={A1_D}

UA0DLY BUF DPWR DGND A0 A0_DLY D_A0 IO_X4000
.MODEL D_A0 UGATE (TPLHMN={A0_D} TPLHMX={A0_D} TPHLMN={A0_D} TPHLMX={A0_D}

UB1DLY BUF DPWR DGND B1 B1_DLY D_B1 IO_X4000
.MODEL D_B1 UGATE (TPLHMN={B1_D} TPLHMX={B1_D} TPHLMN={B1_D} TPHLMX={B1_D}

UB0DLY BUF DPWR DGND B0 B0_DLY D_B0 IO_X4000
.MODEL D_B0 UGATE (TPLHMN={B0_D} TPLHMX={B0_D} TPHLMN={B0_D} TPHLMX={B0_D}

UADDDLY BUF DPWR DGND ADD ADD_DLY D_ADD IO_X4000
.MODEL D_ADD UGATE (TPLHMN={ADD_D} TPLHMX={ADD_D} TPHLMN={ADD_D} TPHLMX={ADD_D}

UCINDLY BUF DPWR DGND CIN CIN_DLY D_CIN IO_X4000
.MODEL D_CIN UGATE (TPLHMN={CIN_D} TPLHMX={CIN_D} TPHLMN={CIN_D} TPHLMX={CIN_D}

U1 LOGICEXP(14,5) DPWR DGND
+ B1_DLY A1_DLY B0_DLY A0_DLY ADD_DLY CIN_DLY C7 C6 C5 C4 C3 C2 C1 C0 
+ E0 E1 E2 E3 CONEW
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   N0 = {(C1 & ~C0)|(C0 & ADD_DLY)}
+   E0 = {~(~C6 | (C6 &  (A1_DLY ^ (N0 ^ (~B1_DLY | ~C7)))))}
+   E1 = {~E0}
+   E2 = {~((C2 & ~C3)| (C3 & (A0_DLY ^ (N0 ^ (~B0_DLY | ~C7)))))}
+   E3 = {~E2}
+   CONEW = {(A0_DLY & C4 & C5) | (~ADD_DLY & ~C4 & C5) | (C7 & ~C4 & ~C5)}

U2 BUF3 DPWR DGND A1_DLY E0 COUT_I 
+ D0_TGATE
+ IO_X4000

U3 BUF3 DPWR DGND COUT0_I E1 COUT_I 
+ D0_TGATE
+ IO_X4000

U4 BUF3 DPWR DGND CONEW E2 COUT0_I
+ D0_TGATE
+ IO_X4000

U5 BUF3 DPWR DGND CIN_DLY E3 COUT0_I
+ D0_TGATE
+ IO_X4000

UCOUTDLY BUF DPWR DGND COUT_I COUT
+ D_COUT IO_X4000
.MODEL D_COUT UGATE (TPLHMN={COUT_D} TPLHMX={COUT_D} TPHLMN={COUT_D} TPHLMX={COUT_D}

UCOUT0 BUF DPWR DGND COUT0_I COUT0
+ D0_GATE IO_X4000

.ENDS X4_CY4

*$
.SUBCKT X4_CY4_01 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_HI $D_LO $D_HI $D_HI $D_HI $D_LO $D_HI $D_LO ; 10111010
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_01

*$

.SUBCKT X4_CY4_02 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_HI $D_HI $D_HI $D_HI $D_HI $D_LO $D_HI $D_LO ; 11111010
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_02

*$

.SUBCKT X4_CY4_03 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_HI $D_HI $D_HI $D_HI $D_LO $D_LO $D_HI $D_LO ; 11110010
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_03

*$

.SUBCKT X4_CY4_04 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_HI $D_HI $D_LO $D_LO $D_LO $D_HI $D_HI $D_LO ; 11000110
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_04

*$

.SUBCKT X4_CY4_05 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_HI $D_HI $D_HI $D_LO $D_LO $D_LO $D_HI $D_LO ; 11100010
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_05

*$

.SUBCKT X4_CY4_06 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_HI $D_LO $D_HI $D_HI $D_HI $D_LO $D_LO $D_LO ; 10111000
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_06

*$

.SUBCKT X4_CY4_07 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_HI $D_HI $D_HI $D_HI $D_HI $D_LO $D_LO $D_LO ; 11111000
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_07

*$

.SUBCKT X4_CY4_08 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_HI $D_HI $D_LO $D_LO $D_LO $D_LO $D_LO $D_LO ; 11000000
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_08

*$

.SUBCKT X4_CY4_09 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_HI $D_HI $D_LO $D_LO $D_LO $D_HI $D_LO $D_LO ; 11000100
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_09

*$

.SUBCKT X4_CY4_10 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_HI $D_HI $D_HI $D_HI $D_LO $D_LO $D_LO $D_LO ; 11110000
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_10

*$

.SUBCKT X4_CY4_11 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_HI $D_HI $D_HI $D_LO $D_LO $D_LO $D_LO $D_LO ; 11100000
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_11

*$

.SUBCKT X4_CY4_12 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_HI $D_LO $D_HI $D_HI $D_HI $D_LO $D_LO $D_HI ; 10111001
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_12

*$

.SUBCKT X4_CY4_13 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_HI $D_HI $D_HI $D_HI $D_HI $D_LO $D_LO $D_HI ; 11111001
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_13

*$

.SUBCKT X4_CY4_14 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_HI $D_HI $D_HI $D_HI $D_LO $D_LO $D_LO $D_HI ; 11110001
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_14

*$

.SUBCKT X4_CY4_15 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_HI $D_HI $D_LO $D_LO $D_LO $D_HI $D_LO $D_HI ; 11000101
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_15

*$

.SUBCKT X4_CY4_16 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_HI $D_HI $D_HI $D_LO $D_LO $D_LO $D_LO $D_HI ; 11100001
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_16

*$

.SUBCKT X4_CY4_17 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_LO $D_LO $D_HI $D_HI $D_HI $D_LO $D_HI $D_LO ; 00111010
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_17

*$

.SUBCKT X4_CY4_18 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS

U1 BUFA(8) DPWR DGND 
+ $D_LO $D_HI $D_HI $D_HI $D_HI $D_LO $D_HI $D_LO ; 01111010
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_18

.SUBCKT X4_CY4_19 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS

U1 BUFA(8) DPWR DGND 
+ $D_LO $D_HI $D_HI $D_HI $D_LO $D_LO $D_HI $D_LO ; 01110010
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_19

*$

.SUBCKT X4_CY4_20 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_LO $D_HI $D_LO $D_LO $D_LO $D_LO $D_LO $D_LO ; 01000000
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_20

*$

.SUBCKT X4_CY4_21 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_LO $D_HI $D_HI $D_HI $D_LO $D_LO $D_HI $D_LO ; 01110010
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_21

*$

.SUBCKT X4_CY4_22 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_LO $D_HI $D_LO $D_LO $D_LO $D_HI $D_HI $D_LO ; 01000110
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_22

*$

.SUBCKT X4_CY4_23 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_LO $D_HI $D_HI $D_LO $D_LO $D_LO $D_HI $D_LO ; 01100010
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_23

*$

.SUBCKT X4_CY4_24 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_LO $D_LO $D_HI $D_HI $D_HI $D_LO $D_LO $D_LO ; 00111000
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_24

*$

.SUBCKT X4_CY4_25 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_LO $D_HI $D_HI $D_HI $D_HI $D_LO $D_LO $D_LO ; 01111000
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_25

*$

.SUBCKT X4_CY4_26 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_LO $D_HI $D_HI $D_HI $D_LO $D_LO $D_LO $D_LO ; 01110000
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_26

*$

.SUBCKT X4_CY4_27 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_LO $D_HI $D_LO $D_LO $D_LO $D_LO $D_LO $D_LO ; 01000000
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_27

*$

.SUBCKT X4_CY4_28 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_LO $D_HI $D_HI $D_HI $D_LO $D_LO $D_LO $D_LO ; 01110000
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_28

*$

.SUBCKT X4_CY4_29 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_LO $D_HI $D_LO $D_LO $D_LO $D_HI $D_LO $D_LO ; 01000100
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_29

*$

.SUBCKT X4_CY4_30 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_LO $D_HI $D_HI $D_LO $D_LO $D_LO $D_LO $D_LO ; 01100000
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_30

*$

.SUBCKT X4_CY4_31 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_LO $D_LO $D_HI $D_HI $D_HI $D_LO $D_LO $D_HI ; 00111001
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_31

*$

.SUBCKT X4_CY4_32 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_LO $D_HI $D_HI $D_HI $D_HI $D_LO $D_LO $D_HI ; 01111001
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_32

*$

.SUBCKT X4_CY4_33 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_LO $D_HI $D_HI $D_HI $D_LO $D_LO $D_LO $D_HI ; 01110001
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_33

*$

.SUBCKT X4_CY4_34 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_LO $D_HI $D_LO $D_LO $D_LO $D_LO $D_LO $D_LO ; 01000000
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_34

*$

.SUBCKT X4_CY4_35 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_LO $D_HI $D_HI $D_HI $D_LO $D_LO $D_LO $D_HI ; 01110001
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_35

*$

.SUBCKT X4_CY4_36 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_LO $D_HI $D_LO $D_LO $D_LO $D_HI $D_LO $D_HI ; 01000101
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_36

*$

.SUBCKT X4_CY4_37 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
;+$D_LO $D_LO $D_LO $D_LO $D_LO $D_LO $D_LO $D_LO G; 00000000
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_37

*$

.SUBCKT X4_CY4_38 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_HI $D_LO $D_LO $D_LO $D_LO $D_LO $D_LO $D_LO ; 10000000
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_38

*$

.SUBCKT X4_CY4_39 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_LO $D_LO $D_HI $D_HI $D_LO $D_LO $D_LO $D_LO ; 00110000
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_39

*$

.SUBCKT X4_CY4_40 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_LO $D_LO $D_LO $D_LO $D_LO $D_HI $D_LO $D_LO ; 00000100
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_40

*$

.SUBCKT X4_CY4_41 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_LO $D_LO $D_HI $D_LO $D_LO $D_LO $D_LO $D_LO ; 00100000
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_41

*$

.SUBCKT X4_CY4_42 C7 C6 C5 C4 C3 C2 C1 C0
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
U1 BUFA(8) DPWR DGND 
+ $D_LO $D_LO $D_LO $D_LO $D_LO $D_HI $D_LO $D_LO ; 00000100
+ C7 C6 C5 C4 C3 C2 C1 C0
+ D0_GATE
+ IO_X4000
.ENDS X4_CY4_42

*$

.SUBCKT X4_FDCE CLR CLK PCLK CLKENA D Q GSR
+ OPTIONAL:  DPWR=$G_X4000_VDD DGND=$G_X4000_VSS 
+ PARAMS: CLR_D=0 GSR_D=0 CLK_D=0 CLKENA_D=0 D_D=0 Q_D=0
+   D_CLK_SETUP=0       D_CLK_HOLD=0
+   CLR_CLK_SETUP=0     CLR_CLK_HOLD=0
+   CLKENA_CLK_SETUP=0  CLKENA_CLK_HOLD=0
+   CLK_WIDTH=0 CLR_WIDTH=0 GSR_WIDTH=0

UD BUF DPWR DGND
+ D D_BUF
+ X4_FDCE_D 
+ IO_X4000
.MODEL X4_FDCE_D UGATE (
+   TPLHMN={D_D} TPLHMX={D_D}
+   TPHLMN={D_D} TPHLMX={D_D}
+   )

UCLK XOR DPWR DGND
+ CLK PCLK CLK_BUF
+ X4_FDCE_CLK 
+ IO_X4000
.MODEL X4_FDCE_CLK UGATE (
+   TPLHMN={CLK_D} TPLHMX={CLK_D}
+   TPHLMN={CLK_D} TPHLMX={CLK_D}
+   )

UCLKENA BUF DPWR DGND
+ CLKENA CLKENA_BUF
+ X4_FDCE_CLKENA 
+ IO_X4000
.MODEL X4_FDCE_CLKENA UGATE (
+   TPLHMN={CLKENA_D} TPLHMX={CLKENA_D}
+   TPHLMN={CLKENA_D} TPHLMX={CLKENA_D}
+   )

UCLR BUF DPWR DGND
+ CLR CLR_BUF
+ X4_FDCE_CLR 
+ IO_X4000
.MODEL X4_FDCE_CLR UGATE (
+   TPLHMN={CLR_D} TPLHMX={CLR_D}
+   TPHLMN={CLR_D} TPHLMX={CLR_D}
+   )

UGSR BUF DPWR DGND
+ GSR GSR_BUF
+ X4_FDCE_GSR 
+ IO_X4000

.MODEL X4_FDCE_GSR UGATE (
+   TPLHMN={GSR_D} TPLHMX={GSR_D}
+   TPHLMN={GSR_D} TPHLMX={GSR_D}
+   )

UCLRIN NOR(2) DPWR DGND ; INVERT BECAUSE DFF IS LOW TRUE
+ CLR_BUF GSR_BUF CLR_IN
+ D0_GATE
+ IO_X4000

UDFF DFFDE(1) DPWR DGND
+ $D_HI CLR_IN CLK_BUF CLKENA_BUF $D_LO D_BUF Q_INT $D_NC
+ D0_EFF
+ IO_X4000

UDELAY PINDLY(1,0,7) DPWR DGND
+ Q_INT
+ CLK CLK_BUF D_BUF CLKENA_BUF CLR GSR GSR_BUF
+ Q
+ IO_X4000
+ PINDLY:
+   Q = {DELAY(Q_D,-1,Q_D)}
+ SETUP_HOLD:
+   CLOCK LH = CLK_BUF
+   DATA(1) = D_BUF
+   SETUPTIME = {D_CLK_SETUP}
+   HOLDTIME =  {D_CLK_HOLD}
+   WHEN = {GSR_BUF == '0 & CLR == '0 & CLKENA_BUF == '1}
+ SETUP_HOLD:
+   CLOCK LH = CLK_BUF
+   DATA(1) = CLKENA_BUF
+   SETUPTIME = {CLKENA_CLK_SETUP}
+   HOLDTIME = {CLKENA_CLK_HOLD}
+   WHEN = {GSR_BUF == '0 & CLR == '0 & D_BUF == Q_INT}
+ SETUP_HOLD:
+   CLOCK LH = CLK_BUF
+   DATA(1) = CLR
+   SETUPTIME = {CLR_CLK_SETUP}
+   HOLDTIME = {CLR_CLK_HOLD}
+   WHEN = {CLR != '1 & GSR_BUF == '0 & CLKENA_BUF == '1}
+ WIDTH:
+   NODE = CLK
+   MIN_HI = {CLK_WIDTH}
+   MIN_LO = {CLK_WIDTH}
+ WIDTH:
+   NODE = CLR
+   MIN_HI = {CLR_WIDTH}
+ WIDTH:
+   NODE = GSR
+   MIN_HI = {GSR_WIDTH}

.MODEL X4_FDCE_Q UEFF (
+  TPCLKQLHMN={Q_D} TPCLKQLHMX={Q_D}
+  TPCLKQHLMN={Q_D} TPCLKQHLMX={Q_D}
+  )

.ENDS X4_FDCE

*$

.SUBCKT X4_FDPE PRE CLK PCLK CLKENA D Q GSR
+ OPTIONAL:  DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: PRE_D=0 GSR_D=0 CLK_D=0 CLKENA_D=0 D_D=0 Q_D=0
+   D_CLK_SETUP=0       D_CLK_HOLD=0
+   PRE_CLK_SETUP=0     PRE_CLK_HOLD=0
+   CLKENA_CLK_SETUP=0  CLKENA_CLK_HOLD=0
+   CLK_WIDTH=0 PRE_WIDTH=0 GSR_WIDTH=0

UD BUF DPWR DGND
+ D D_BUF
+ X4_FDPE_D 
+ IO_X4000
.MODEL X4_FDPE_D UGATE (
+   TPLHMN={D_D} TPLHMX={D_D}
+   TPHLMN={D_D} TPHLMX={D_D}
+   )

UCLK XOR DPWR DGND
+ CLK PCLK CLK_BUF
+ X4_FDPE_CLK 
+ IO_X4000
.MODEL X4_FDPE_CLK UGATE (
+   TPLHMN={CLK_D} TPLHMX={CLK_D}
+   TPHLMN={CLK_D} TPHLMX={CLK_D}
+   )

UCLKENA BUF DPWR DGND
+ CLKENA CLKENA_BUF
+ X4_FDPE_CLKENA 
+ IO_X4000
.MODEL X4_FDPE_CLKENA UGATE (
+   TPLHMN={CLKENA_D} TPLHMX={CLKENA_D}
+   TPHLMN={CLKENA_D} TPHLMX={CLKENA_D}
+   )

UPRE BUF DPWR DGND
+ PRE PRE_BUF
+ X4_FDPE_PRE 
+ IO_X4000
.MODEL X4_FDPE_PRE UGATE (
+   TPLHMN={PRE_D} TPLHMX={PRE_D}
+   TPHLMN={PRE_D} TPHLMX={PRE_D}
+   )

UGSR BUF DPWR DGND
+ GSR GSR_BUF
+ X4_FDPE_GSR 
+ IO_X4000
.MODEL X4_FDPE_GSR UGATE (
+   TPLHMN={GSR_D} TPLHMX={GSR_D}
+   TPHLMN={GSR_D} TPHLMX={GSR_D}
+   )

UPREIN NOR(2) DPWR DGND ; INVERT BECAUSE DFF IS LOW TRUE
+ PRE_BUF GSR_BUF PRE_IN
+ D0_GATE
+ IO_X4000

UDFF DFFDE(1) DPWR DGND
+ PRE_IN $D_HI CLK_BUF CLKENA_BUF $D_LO D_BUF Q_INT $D_NC
+ D0_EFF
+ IO_X4000

UDELAY PINDLY(1,0,7) DPWR DGND
+ Q_INT
+ CLK CLK_BUF D_BUF CLKENA_BUF PRE GSR GSR_BUF
+ Q
+ IO_X4000
+ PINDLY:
+   Q = {DELAY(Q_D,-1,Q_D)}
+ SETUP_HOLD:
+   CLOCK LH = CLK_BUF
+   DATA(1) = D_BUF
+   SETUPTIME = {D_CLK_SETUP}
+   HOLDTIME =  {D_CLK_HOLD}
+   WHEN = {GSR_BUF == '0 & PRE == '0 & CLKENA_BUF == '1}
+ SETUP_HOLD:
+   CLOCK LH = CLK_BUF
+   DATA(1) = CLKENA_BUF
+   SETUPTIME = {CLKENA_CLK_SETUP}
+   HOLDTIME = {CLKENA_CLK_HOLD}
+   WHEN = {GSR_BUF == '0 & PRE == '0 & D_BUF == Q_INT}
+ SETUP_HOLD:
+   CLOCK LH = CLK_BUF
+   DATA(1) = PRE
+   SETUPTIME = {PRE_CLK_SETUP}
+   HOLDTIME = {PRE_CLK_HOLD}
+   WHEN = {PRE != '1 & GSR_BUF == '0 & CLKENA_BUF == '1}
+ WIDTH:
+   NODE = CLK
+   MIN_HI = {CLK_WIDTH}
+   MIN_LO = {CLK_WIDTH}
+ WIDTH:
+   NODE = PRE
+   MIN_HI = {PRE_WIDTH}
+ WIDTH:
+   NODE = GSR
+   MIN_HI = {GSR_WIDTH}

.MODEL X4_FDPE_Q UEFF (
+  TPCLKQLHMN={Q_D} TPCLKQLHMX={Q_D}
+  TPCLKQHLMN={Q_D} TPCLKQHLMX={Q_D}
+  )

.ENDS X4_FDPE

*$

.SUBCKT X4_NAND2  I0 P0 I1 P1 OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 OUT_D=0

U1 LOGICEXP(5,1) DPWR DGND 
+ I0 P0 I1 P1 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ~( (I0^P0) & (I1^P1) ) }

U2 PINDLY(1,0,2) DPWR DGND
+ OUT_INT
+ I0 I1
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_NAND2


.SUBCKT X4_NAND3  I0 P0 I1 P1 I2 P2 OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 I2_D=0 OUT_D=0

U1 LOGICEXP(7,1) DPWR DGND 
+ I0 P0 I1 P1 I2 P2 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ~( (I0^P0) & (I1^P1) & (I2^P2) ) }

U2 PINDLY(1,0,3) DPWR DGND
+ OUT_INT
+ I0 I1 I2
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+		 CHANGED(I2,0), DELAY(I2_D+OUT_D,-1,I2_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_NAND3


.SUBCKT X4_NAND4  I0 P0 I1 P1 I2 P2 I3 P3 OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 I2_D=0 I3_D=0 OUT_D=0

U1 LOGICEXP(9,1) DPWR DGND 
+ I0 P0 I1 P1 I2 P2 I3 P3 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ~( (I0^P0) & (I1^P1) & (I2^P2) & (I3^P3) ) }

U2 PINDLY(1,0,4) DPWR DGND
+ OUT_INT
+ I0 I1 I2 I3
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+		 CHANGED(I2,0), DELAY(I2_D+OUT_D,-1,I2_D+OUT_D),
+		 CHANGED(I3,0), DELAY(I3_D+OUT_D,-1,I3_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_NAND4


.SUBCKT X4_NAND5  I0 P0 I1 P1 I2 P2 I3 P3 I4 P4 OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 I2_D=0 I3_D=0 I4_D=0 OUT_D=0

U1 LOGICEXP(11,1) DPWR DGND 
+ I0 P0 I1 P1 I2 P2 I3 P3 I4 P4 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ~( (I0^P0) & (I1^P1) & (I2^P2) & (I3^P3) & (I4^P4) ) }

U2 PINDLY(1,0,5) DPWR DGND
+ OUT_INT
+ I0 I1 I2 I3 I4
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+		 CHANGED(I2,0), DELAY(I2_D+OUT_D,-1,I2_D+OUT_D),
+		 CHANGED(I3,0), DELAY(I3_D+OUT_D,-1,I3_D+OUT_D),
+		 CHANGED(I4,0), DELAY(I4_D+OUT_D,-1,I4_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_NAND5

*$


.SUBCKT X4_NOR2  I0 P0 I1 P1 OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 OUT_D=0

U1 LOGICEXP(5,1) DPWR DGND 
+ I0 P0 I1 P1 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ~( (I0^P0) | (I1^P1) ) }

U2 PINDLY(1,0,2) DPWR DGND
+ OUT_INT
+ I0 I1
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_NOR2


.SUBCKT X4_NOR3  I0 P0 I1 P1 I2 P2 OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 I2_D=0 OUT_D=0

U1 LOGICEXP(7,1) DPWR DGND 
+ I0 P0 I1 P1 I2 P2 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ~( (I0^P0) | (I1^P1) | (I2^P2) ) }

U2 PINDLY(1,0,3) DPWR DGND
+ OUT_INT
+ I0 I1 I2
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+		 CHANGED(I2,0), DELAY(I2_D+OUT_D,-1,I2_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_NOR3


.SUBCKT X4_NOR4  I0 P0 I1 P1 I2 P2 I3 P3 OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 I2_D=0 I3_D=0 OUT_D=0

U1 LOGICEXP(9,1) DPWR DGND 
+ I0 P0 I1 P1 I2 P2 I3 P3 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ~( (I0^P0) | (I1^P1) | (I2^P2) | (I3^P3) ) }

U2 PINDLY(1,0,4) DPWR DGND
+ OUT_INT
+ I0 I1 I2 I3
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+		 CHANGED(I2,0), DELAY(I2_D+OUT_D,-1,I2_D+OUT_D),
+		 CHANGED(I3,0), DELAY(I3_D+OUT_D,-1,I3_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_NOR4


.SUBCKT X4_NOR5  I0 P0 I1 P1 I2 P2 I3 P3 I4 P4 OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 I2_D=0 I3_D=0 I4_D=0 OUT_D=0

U1 LOGICEXP(11,1) DPWR DGND 
+ I0 P0 I1 P1 I2 P2 I3 P3 I4 P4 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ~( (I0^P0) | (I1^P1) | (I2^P2) | (I3^P3) | (I4^P4) ) }

U2 PINDLY(1,0,5) DPWR DGND
+ OUT_INT
+ I0 I1 I2 I3 I4
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+		 CHANGED(I2,0), DELAY(I2_D+OUT_D,-1,I2_D+OUT_D),
+		 CHANGED(I3,0), DELAY(I3_D+OUT_D,-1,I3_D+OUT_D),
+		 CHANGED(I4,0), DELAY(I4_D+OUT_D,-1,I4_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_NOR5

*$

.SUBCKT X4_OBUF IN PIN GTS PGTS OUT
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: IN_D=0 OUT_D=0 GTS_D=0
+ GTS_LH_D=0 GTS_HL_D=0		; GTS delay from STARTUP
*
*
UIN XOR DPWR DGND 
+ IN PIN  IN_BUF
+ X4_IN
+ IO_X4000

UGTS NXOR DPWR DGND
+ GTS PGTS GTS_BUF
+ X4_OBUF_GTS
+ IO_X4000

.MODEL X4_OBUF_GTS UGATE (
+   TPLHMN={GTS_LH_D + GTS_D} TPLHMX={GTS_LH_D + GTS_D}
+   TPHLMN={GTS_HL_D + GTS_D} TPHLMX={GTS_HL_D + GTS_D}
+   )

UOUT BUF3 DPWR DGND
+ IN_BUF GTS_BUF  OUT
+ D0_TGATE
+ IO_X4000

.MODEL X4_IN UGATE (
+  TPLHMN={IN_D+OUT_D} TPHLMN={IN_D+OUT_D}
+  TPLHMX={IN_D+OUT_D} TPHLMX={IN_D+OUT_D}
+  )

.ENDS X4_OBUF


.SUBCKT X4_OBUFT IN PI T PT GTS PGTS OUT
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: IN_D=0 TLH_D=0 THL_D=0 OUT_D=0 PULLUP_D=0 GTS_D=0
+ GTS_LH_D=0 GTS_HL_D=0		; GTS delay from STARTUP
*
UTDLY BUF DPWR DGND
+ T TDLY
+ X4_OBUFT_T
+ IO_X4000

UGTS XOR DPWR DGND
+ GTS PGTS GTS_BUF
+ X4_OBUFT_GTS
+ IO_X4000

.MODEL X4_OBUFT_T UGATE(
+  TPLHMN={TLH_D} TPHLMN={THL_D}
+  TPLHMX={TLH_D} TPHLMX={THL_D}
+  )

.MODEL X4_OBUFT_GTS UGATE(
+   TPLHMN={GTS_LH_D + GTS_D} TPLHMX={GTS_LH_D + GTS_D}
+   TPHLMN={GTS_HL_D + GTS_D} TPHLMX={GTS_HL_D + GTS_D}
+   )

UENA LOGICEXP(3,1) DPWR DGND 
+ TDLY PT GTS_BUF  ENA
+ D0_GATE IO_X4000
+ LOGIC:
+   ENA = { ~((TDLY ^ PT) | GTS_BUF) }  ; XILINX 3-states are active-low enable

UIDLY BUF DPWR DGND IN INBUF X4_OBUFT_IN IO_X4000
.MODEL X4_OBUFT_IN UGATE(
+  TPLHMN={IN_D+OUT_D} TPHLMN={IN_D+OUT_D} 
+  TPLHMX={IN_D+OUT_D} TPHLMX={IN_D+OUT_D} 
+  )

UIN XOR DPWR DGND INBUF PI INNEW D0_GATE IO_X4000

UOUT BUF3 DPWR DGND 
+ INNEW ENA OUT
+ D0_TGATE
+ IO_X4000

.ENDS X4_OBUFT


.SUBCKT X4_OR2  I0 P0 I1 P1 OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 OUT_D=0

U1 LOGICEXP(5,1) DPWR DGND 
+ I0 P0 I1 P1 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ( (I0^P0) | (I1^P1) ) }

U2 PINDLY(1,0,2) DPWR DGND
+ OUT_INT
+ I0 I1
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_OR2


.SUBCKT X4_OR3  I0 P0 I1 P1 I2 P2 OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 I2_D=0 OUT_D=0

U1 LOGICEXP(7,1) DPWR DGND 
+ I0 P0 I1 P1 I2 P2 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ( (I0^P0) | (I1^P1) | (I2^P2) ) }

U2 PINDLY(1,0,3) DPWR DGND
+ OUT_INT
+ I0 I1 I2
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+		 CHANGED(I2,0), DELAY(I2_D+OUT_D,-1,I2_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_OR3


.SUBCKT X4_OR4  I0 P0 I1 P1 I2 P2 I3 P3 OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 I2_D=0 I3_D=0 OUT_D=0

U1 LOGICEXP(9,1) DPWR DGND 
+ I0 P0 I1 P1 I2 P2 I3 P3 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ( (I0^P0) | (I1^P1) | (I2^P2) | (I3^P3) ) }

U2 PINDLY(1,0,4) DPWR DGND
+ OUT_INT
+ I0 I1 I2 I3
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+		 CHANGED(I2,0), DELAY(I2_D+OUT_D,-1,I2_D+OUT_D),
+		 CHANGED(I3,0), DELAY(I3_D+OUT_D,-1,I3_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_OR4


.SUBCKT X4_OR5  I0 P0 I1 P1 I2 P2 I3 P3 I4 P4 OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 I2_D=0 I3_D=0 I4_D=0 OUT_D=0

U1 LOGICEXP(11,1) DPWR DGND 
+ I0 P0 I1 P1 I2 P2 I3 P3 I4 P4 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ( (I0^P0) | (I1^P1) | (I2^P2) | (I3^P3) | (I4^P4) ) }

U2 PINDLY(1,0,5) DPWR DGND
+ OUT_INT
+ I0 I1 I2 I3 I4
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+		 CHANGED(I2,0), DELAY(I2_D+OUT_D,-1,I2_D+OUT_D),
+		 CHANGED(I3,0), DELAY(I3_D+OUT_D,-1,I3_D+OUT_D),
+		 CHANGED(I4,0), DELAY(I4_D+OUT_D,-1,I4_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_OR5

*$

.SUBCKT X4_TBUF  IN T OUT TDLY
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: IN_D=0 TLH_D=0 THL_D=0 OUT_D=0
*
* XILINX 3-states enables are active low
* The TDLY signal is available as an output to allow for
* proper timing of externally-connected PULLUP devices.

UTDLY BUF DPWR DGND T TDLY X4_TBUF_TDLY IO_X4000
UTDLYBAR INV DPWR DGND T TDLYBAR X4_TBUF_T IO_X4000

.MODEL X4_TBUF_TDLY UGATE(
+  TPLHMN={TLH_D} TPHLMN={THL_D}
+  TPLHMX={TLH_D} TPHLMX={THL_D}
+  )

.MODEL X4_TBUF_T UGATE(
+  TPLHMN={THL_D} TPHLMN={TLH_D}	; lh/hl swapped intentionally
+  TPLHMX={THL_D} TPHLMX={TLH_D}
+  )

UIDLY BUF DPWR DGND IN INDLY X4_TBUF_IN IO_X4000
.MODEL X4_TBUF_IN UGATE(
+  TPLHMN={IN_D+OUT_D} TPHLMN={IN_D+OUT_D} 
+  TPLHMX={IN_D+OUT_D} TPHLMX={IN_D+OUT_D} 
+  )

UOUT BUF3 DPWR DGND 
+ INDLY TDLYBAR OUT
+ D0_TGATE
+ IO_X4000

.ENDS X4_TBUF

*$

.SUBCKT X4_XNOR2  I0 P0 I1 P1 OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 OUT_D=0

U1 LOGICEXP(5,1) DPWR DGND 
+ I0 P0 I1 P1 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ~( (I0^P0) ^ (I1^P1) ) }

U2 PINDLY(1,0,2) DPWR DGND
+ OUT_INT
+ I0 I1
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_XNOR2

*$

.SUBCKT X4_XNOR3  I0 P0 I1 P1 I2 P2  OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 I2_D=0 OUT_D=0

U1 LOGICEXP(7,1) DPWR DGND 
+ I0 P0 I1 P1 I2 P2 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ~ ( (I0^P0) ^ (I1^P1) ^ (I2^P2)) }

U2 PINDLY(1,0,3) DPWR DGND
+ OUT_INT
+ I0 I1 I2
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+                CHANGED(I2,0), DELAY(I2_D+OUT_D,-1,I2_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_XNOR3

*$

.SUBCKT X4_XNOR4  I0 P0 I1 P1 I2 P2 I3 P3 OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 I2_D=0 I3_D=0 OUT_D=0

U1 LOGICEXP(9,1) DPWR DGND 
+ I0 P0 I1 P1 I2 P2 I3 P3 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ~ ( (I0^P0) ^ (I1^P1) ^ (I2^P2) ^ (I3^P3) ) }

U2 PINDLY(1,0,4) DPWR DGND
+ OUT_INT
+ I0 I1 I2 I3
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+		 CHANGED(I2,0), DELAY(I2_D+OUT_D,-1,I2_D+OUT_D),
+		 CHANGED(I3,0), DELAY(I3_D+OUT_D,-1,I3_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_XNOR4

*$

.SUBCKT X4_XNOR5  I0 P0 I1 P1 I2 P2 I3 P3 I4 P4 OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 I2_D=0 I3_D=0 I4_D=0 OUT_D=0

U1 LOGICEXP(11,1) DPWR DGND 
+ I0 P0 I1 P1 I2 P2 I3 P3 I4 P4 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ~ ( (I0^P0) ^ (I1^P1) ^ (I2^P2) ^ (I3^P3) ^ (I4^P4) ) }

U2 PINDLY(1,0,5) DPWR DGND
+ OUT_INT
+ I0 I1 I2 I3 I4
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+		 CHANGED(I2,0), DELAY(I2_D+OUT_D,-1,I2_D+OUT_D),
+		 CHANGED(I3,0), DELAY(I3_D+OUT_D,-1,I3_D+OUT_D),
+		 CHANGED(I4,0), DELAY(I4_D+OUT_D,-1,I4_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_XNOR5

*$

.SUBCKT X4_XOR2  I0 P0 I1 P1 OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 OUT_D=0

U1 LOGICEXP(5,1) DPWR DGND 
+ I0 P0 I1 P1 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ( (I0^P0) ^ (I1^P1) ) }

U2 PINDLY(1,0,2) DPWR DGND
+ OUT_INT
+ I0 I1
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_XOR2

*$

.SUBCKT X4_XOR3  I0 P0 I1 P1 I2 P2  OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 I2_D=0 OUT_D=0

U1 LOGICEXP(7,1) DPWR DGND 
+ I0 P0 I1 P1 I2 P2 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ( (I0^P0) ^ (I1^P1) ^ (I2^P2)) }

U2 PINDLY(1,0,3) DPWR DGND
+ OUT_INT
+ I0 I1 I2
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+                CHANGED(I2,0), DELAY(I2_D+OUT_D,-1,I2_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_XOR3

*$

.SUBCKT X4_XOR4  I0 P0 I1 P1 I2 P2 I3 P3 OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 I2_D=0 I3_D=0 OUT_D=0

U1 LOGICEXP(9,1) DPWR DGND 
+ I0 P0 I1 P1 I2 P2 I3 P3 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ( (I0^P0) ^ (I1^P1) ^ (I2^P2) ^ (I3^P3) ) }

U2 PINDLY(1,0,4) DPWR DGND
+ OUT_INT
+ I0 I1 I2 I3
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+		 CHANGED(I2,0), DELAY(I2_D+OUT_D,-1,I2_D+OUT_D),
+		 CHANGED(I3,0), DELAY(I3_D+OUT_D,-1,I3_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_XOR4

*$

.SUBCKT X4_XOR5  I0 P0 I1 P1 I2 P2 I3 P3 I4 P4 OUT PO
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0 I2_D=0 I3_D=0 I4_D=0 OUT_D=0

U1 LOGICEXP(11,1) DPWR DGND 
+ I0 P0 I1 P1 I2 P2 I3 P3 I4 P4 PO OUT_INT
+ D0_GATE
+ IO_X4000
+ LOGIC:
+   OUT_INT = {PO ^ ( (I0^P0) ^ (I1^P1) ^ (I2^P2) ^ (I3^P3) ^ (I4^P4) ) }

U2 PINDLY(1,0,5) DPWR DGND
+ OUT_INT
+ I0 I1 I2 I3 I4
+ OUT
+ IO_X4000
+ PINDLY:
+   OUT = {CASE( CHANGED(I0,0), DELAY(I0_D+OUT_D,-1,I0_D+OUT_D),
+                CHANGED(I1,0), DELAY(I1_D+OUT_D,-1,I1_D+OUT_D),
+		 CHANGED(I2,0), DELAY(I2_D+OUT_D,-1,I2_D+OUT_D),
+		 CHANGED(I3,0), DELAY(I3_D+OUT_D,-1,I3_D+OUT_D),
+		 CHANGED(I4,0), DELAY(I4_D+OUT_D,-1,I4_D+OUT_D),
+		 DELAY(0,0,0) ) }

.ENDS X4_XOR5

*$

.SUBCKT X4_OFD GTS PGTS GSR PGSR CLK PCLK D PD Q
+ OPTIONAL:  DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: GSR_D=0 CLK_D=0 GTS_D=0 D_D=0 Q_D=0
+   GTS_LH_D=0 GTS_HL_D=0		; GTS delay from STARTUP
+   D_CLK_SETUP=0       D_CLK_HOLD=0
+   GSR_CLK_SETUP=0     GSR_CLK_HOLD=0
+   CLK_WIDTH=0 GSR_WIDTH=0

UD XOR DPWR DGND
+ D PD   D_BUF
+ X4_OFD_D 
+ IO_X4000

.MODEL X4_OFD_D UGATE (
+   TPLHMN={D_D} TPLHMX={D_D}
+   TPHLMN={D_D} TPHLMX={D_D}
+   )

UCLK XOR DPWR DGND
+ CLK PCLK CLK_BUF
+ X4_OFD_CLK 
+ IO_X4000

.MODEL X4_OFD_CLK UGATE (
+   TPLHMN={CLK_D} TPLHMX={CLK_D}
+   TPHLMN={CLK_D} TPHLMX={CLK_D}
+   )

UGTS NXOR DPWR DGND
+ GTS PGTS GTS_BUF
+ X4_OFD_GTS 
+ IO_X4000

.MODEL X4_OFD_GTS UGATE (
+   TPLHMN={GTS_LH_D + GTS_D} TPLHMX={GTS_LH_D + GTS_D}
+   TPHLMN={GTS_HL_D + GTS_D} TPHLMX={GTS_HL_D + GTS_D}
+   )

UGSR NXOR DPWR DGND
+ GSR PGSR GSR_BUF
+ X4_OFD_GSR 
+ IO_X4000

.MODEL X4_OFD_GSR UGATE (
+   TPLHMN={GSR_D} TPLHMX={GSR_D}
+   TPHLMN={GSR_D} TPHLMX={GSR_D}
+   )

UDFF DFF(1) DPWR DGND
+ $D_HI GSR_BUF CLK_BUF D_BUF Q_INT1 $D_NC
+ D0_EFF
+ IO_X4000

UQTS BUF3() DPWR DGND
+ QINT GTS_BUF  Q
+ D0_TGATE
+ IO_X4000

UDELAY PINDLY(1,0,5) DPWR DGND
+ Q_INT1
+ CLK CLK_BUF D_BUF GSR GSR_BUF
+ QINT
+ IO_X4000
+ PINDLY:
+   QINT = {DELAY(Q_D,-1,Q_D)}
+ SETUP_HOLD:
+   CLOCK LH = CLK_BUF
+   DATA(1) = D_BUF
+   SETUPTIME = {D_CLK_SETUP}
+   HOLDTIME =  {D_CLK_HOLD}
+   WHEN = {GSR_BUF == '0 }
+ WIDTH:
+   NODE = CLK
+   MIN_HI = {CLK_WIDTH}
+   MIN_LO = {CLK_WIDTH}
+ WIDTH:
+   NODE = GSR
+   MIN_HI = {GSR_WIDTH}

.ENDS X4_OFD

*$

.SUBCKT X4_OFDI GTS PGTS GSR PGSR CLK PCLK D PD Q
+ OPTIONAL:  DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: GSR_D=0 CLK_D=0 GTS_D=0 D_D=0 Q_D=0
+   GTS_LH_D=0 GTS_HL_D=0		; GTS delay from STARTUP
+   D_CLK_SETUP=0       D_CLK_HOLD=0
+   GSR_CLK_SETUP=0     GSR_CLK_HOLD=0
+   CLK_WIDTH=0 GSR_WIDTH=0

UD NXOR DPWR DGND
+ D PD   D_BUF
+ X4_OFD_D 
+ IO_X4000

.MODEL X4_OFD_D UGATE (
+   TPLHMN={D_D} TPLHMX={D_D}
+   TPHLMN={D_D} TPHLMX={D_D}
+   )

UCLK XOR DPWR DGND
+ CLK PCLK CLK_BUF
+ X4_OFD_CLK 
+ IO_X4000

.MODEL X4_OFD_CLK UGATE (
+   TPLHMN={CLK_D} TPLHMX={CLK_D}
+   TPHLMN={CLK_D} TPHLMX={CLK_D}
+   )

UGTS NXOR DPWR DGND
+ GTS PGTS GTS_BUF
+ X4_OFD_GTS 
+ IO_X4000

.MODEL X4_OFD_GTS UGATE (
+   TPLHMN={GTS_LH_D + GTS_D} TPLHMX={GTS_LH_D + GTS_D}
+   TPHLMN={GTS_HL_D + GTS_D} TPHLMX={GTS_HL_D + GTS_D}
+   )

UGSR NXOR DPWR DGND
+ GSR PGSR GSR_BUF
+ X4_OFD_GSR 
+ IO_X4000

.MODEL X4_OFD_GSR UGATE (
+   TPLHMN={GSR_D} TPLHMX={GSR_D}
+   TPHLMN={GSR_D} TPHLMX={GSR_D}
+   )

UDFF DFF(1) DPWR DGND
+ $D_HI GSR_BUF CLK_BUF D_BUF Q_INT1 $D_NC
+ D0_EFF
+ IO_X4000

UQPOL INV DPWR DGND
+ Q_INT2   QINT
+ D0_GATE
+ IO_X4000

UQTS BUF3() DPWR DGND
+ QINT GTS_BUF  Q
+ D0_TGATE
+ IO_X4000

UDELAY PINDLY(1,0,5) DPWR DGND
+ Q_INT1
+ CLK CLK_BUF D_BUF GSR GSR_BUF
+ Q_INT2
+ IO_X4000
+ PINDLY:
+   Q_INT2 = {DELAY(Q_D,-1,Q_D)}
+ SETUP_HOLD:
+   CLOCK LH = CLK_BUF
+   DATA(1) = D_BUF
+   SETUPTIME = {D_CLK_SETUP}
+   HOLDTIME =  {D_CLK_HOLD}
+   WHEN = {GSR_BUF == '0 }
+ WIDTH:
+   NODE = CLK
+   MIN_HI = {CLK_WIDTH}
+   MIN_LO = {CLK_WIDTH}
+ WIDTH:
+   NODE = GSR
+   MIN_HI = {GSR_WIDTH}

.ENDS X4_OFDI

*$

.SUBCKT X4_OFDT GTS PGTS GSR PGSR CLK PCLK T PT D PD O
+ OPTIONAL:  DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: GSR_D=0 CLK_D=0 GTS_D=0 T_ENBD=0 T_DISD=0 D_D=0 O_D=0
+   GTS_LH_D=0 GTS_HL_D=0		; GTS delay from STARTUP
+   D_CLK_SETUP=0       D_CLK_HOLD=0
+   GSR_CLK_SETUP=0     GSR_CLK_HOLD=0
+   CLK_WIDTH=0 GSR_WIDTH=0

UD XOR DPWR DGND
+ D PD   D_BUF
+ X4_OFDT_D 
+ IO_X4000

UT XOR DPWR DGND
+ T PT   T_BUF
+ X4_OFDT_T 
+ IO_X4000


.MODEL X4_OFDT_D UGATE (
+   TPLHMN={D_D} TPLHMX={D_D}
+   TPHLMN={D_D} TPHLMX={D_D}
+   )

.MODEL X4_OFDT_T UGATE (
+   TPHLMN={T_ENBD} TPHLMX={T_ENBD}
+   TPLHMN={T_DISD} TPLHMX={T_DISD}
+   )

UCLK XOR DPWR DGND
+ CLK PCLK CLK_BUF
+ X4_OFDT_CLK 
+ IO_X4000

.MODEL X4_OFDT_CLK UGATE (
+   TPLHMN={CLK_D} TPLHMX={CLK_D}
+   TPHLMN={CLK_D} TPHLMX={CLK_D}
+   )

UGTSORT NOR(2) DPWR DGND
+ T_BUF GTS_BUF GTS_SIG
+ D0_GATE 
+ IO_X4000

UGTS XOR DPWR DGND
+ GTS PGTS GTS_BUF
+ X4_OFDT_GTS 
+ IO_X4000

.MODEL X4_OFDT_GTS UGATE (
+   TPLHMN={GTS_LH_D + GTS_D} TPLHMX={GTS_LH_D + GTS_D}
+   TPHLMN={GTS_HL_D + GTS_D} TPHLMX={GTS_HL_D + GTS_D}
+   )

UGSR NXOR DPWR DGND
+ GSR PGSR GSR_BUF
+ X4_OFDT_GSR 
+ IO_X4000

.MODEL X4_OFDT_GSR UGATE (
+   TPLHMN={GSR_D} TPLHMX={GSR_D}
+   TPHLMN={GSR_D} TPHLMX={GSR_D}
+   )

UDFF DFF(1) DPWR DGND
+ $D_HI GSR_BUF CLK_BUF D_BUF O_INT1 $D_NC
+ D0_EFF
+ IO_X4000

UOTS BUF3() DPWR DGND
+ O_INT2 GTS_SIG  O
+ D0_TGATE
+ IO_X4000

UDELAY PINDLY(1,0,5) DPWR DGND
+ O_INT1
+ CLK CLK_BUF D_BUF GSR GSR_BUF
+ O_INT2
+ IO_X4000
+ PINDLY:
+   O_INT2 = {DELAY(O_D,-1,O_D)}
+ SETUP_HOLD:
+   CLOCK LH = CLK_BUF
+   DATA(1) = D_BUF
+   SETUPTIME = {D_CLK_SETUP}
+   HOLDTIME =  {D_CLK_HOLD}
+   WHEN = {GSR_BUF == '0 }
+ WIDTH:
+   NODE = CLK
+   MIN_HI = {CLK_WIDTH}
+   MIN_LO = {CLK_WIDTH}
+ WIDTH:
+   NODE = GSR
+   MIN_HI = {GSR_WIDTH}

.ENDS X4_OFDT

*$

.SUBCKT X4_OFDTI GTS PGTS GSR PGSR CLK PCLK T PT D PD O
+ OPTIONAL:  DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: GSR_D=0 CLK_D=0 GTS_D=0 T_ENBD=0 T_DISD=0 D_D=0 O_D=0
+   GTS_LH_D=0 GTS_HL_D=0		; GTS delay from STARTUP
+   D_CLK_SETUP=0       D_CLK_HOLD=0
+   GSR_CLK_SETUP=0     GSR_CLK_HOLD=0
+   CLK_WIDTH=0 GSR_WIDTH=0

UD NXOR DPWR DGND
+ D PD   D_BUF
+ X4_OFDTI_D 
+ IO_X4000

.MODEL X4_OFDTI_D UGATE (
+   TPLHMN={D_D} TPLHMX={D_D}
+   TPHLMN={D_D} TPHLMX={D_D}
+   )

.MODEL X4_OFDTI_T UGATE (
+   TPHLMN={T_ENBD} TPHLMX={T_ENBD}
+   TPLHMN={T_DISD} TPLHMX={T_DISD}
+   )

UCLK XOR DPWR DGND
+ CLK PCLK CLK_BUF
+ X4_OFDTI_CLK 
+ IO_X4000

.MODEL X4_OFDTI_CLK UGATE (
+   TPLHMN={CLK_D} TPLHMX={CLK_D}
+   TPHLMN={CLK_D} TPHLMX={CLK_D}
+   )

UGTSORT NOR(2) DPWR DGND
+ T_BUF GTS_BUF GTS_SIG
+ D0_GATE 
+ IO_X4000

UT BUF DPWR DGND
+ T T_BUF
+ X4_OFDTI_T
+ IO_X4000

UGTS XOR DPWR DGND
+ GTS PGTS GTS_BUF
+ X4_OFDTI_GTS 
+ IO_X4000

.MODEL X4_OFDTI_GTS UGATE (
+   TPLHMN={GTS_LH_D + GTS_D} TPLHMX={GTS_LH_D + GTS_D}
+   TPHLMN={GTS_HL_D + GTS_D} TPHLMX={GTS_HL_D + GTS_D}
+   )

UGSR NXOR DPWR DGND
+ GSR PGSR GSR_BUF
+ X4_OFDTI_GSR 
+ IO_X4000

.MODEL X4_OFDTI_GSR UGATE (
+   TPLHMN={GSR_D} TPLHMX={GSR_D}
+   TPHLMN={GSR_D} TPHLMX={GSR_D}
+   )

UDFF DFF(1) DPWR DGND
+ $D_HI GSR_BUF CLK_BUF D_BUF $D_NC O_INT1
+ D0_EFF
+ IO_X4000

UOTS BUF3() DPWR DGND
+ O_INT2 GTS_SIG  O
+ D0_TGATE
+ IO_X4000

UDELAY PINDLY(1,0,5) DPWR DGND
+ O_INT1
+ CLK CLK_BUF D_BUF GSR GSR_BUF
+ O_INT2
+ IO_X4000
+ PINDLY:
+   O_INT2 = {DELAY(O_D,-1,O_D)}
+ SETUP_HOLD:
+   CLOCK LH = CLK_BUF
+   DATA(1) = D_BUF
+   SETUPTIME = {D_CLK_SETUP}
+   HOLDTIME =  {D_CLK_HOLD}
+   WHEN = {GSR_BUF == '0 }
+ WIDTH:
+   NODE = CLK
+   MIN_HI = {CLK_WIDTH}
+   MIN_LO = {CLK_WIDTH}
+ WIDTH:
+   NODE = GSR
+   MIN_HI = {GSR_WIDTH}

.ENDS X4_OFDTI

*$

.SUBCKT X4_INFF GSR PGSR CLK PCLK D PD Q PQ
+ OPTIONAL:  DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: GSR_D=0 CLK_D=0 D_D=0 Q_D=0
+   D_CLK_SETUP=0       D_CLK_HOLD=0
+   GSR_CLK_SETUP=0     GSR_CLK_HOLD=0
+   CLK_WIDTH=0 GSR_WIDTH=0


UD XOR DPWR DGND
+ D PD   D_BUF
+ X4_INFF_D 
+ IO_X4000

.MODEL X4_INFF_D UGATE (
+   TPLHMN={D_D} TPLHMX={D_D}
+   TPHLMN={D_D} TPHLMX={D_D}
+   )

UCLK XOR DPWR DGND
+ CLK PCLK CLK_BUF
+ X4_INFF_CLK 
+ IO_X4000

.MODEL X4_INFF_CLK UGATE (
+   TPLHMN={CLK_D} TPLHMX={CLK_D}
+   TPHLMN={CLK_D} TPHLMX={CLK_D}
+   )

UGSR NXOR DPWR DGND
+ GSR  PGSR  GSR_BUF
+ X4_INFF_GSR 
+ IO_X4000

.MODEL X4_INFF_GSR UGATE (
+   TPLHMN={GSR_D} TPLHMX={GSR_D}
+   TPHLMN={GSR_D} TPHLMX={GSR_D}
+   )

UDFF DFF(1) DPWR DGND
+ $D_HI GSR_BUF CLK_BUF D_BUF Q_INT $D_NC
+ D0_EFF
+ IO_X4000

UQPOL XOR() DPWR DGND
+ Q_OUT PQ   Q
+ D0_GATE
+ IO_X4000

UDELAY PINDLY(1,0,5) DPWR DGND
+ Q_INT
+ CLK CLK_BUF D_BUF GSR GSR_BUF
+ Q_OUT
+ IO_X4000
+ PINDLY:
+   Q_OUT = {DELAY(Q_D,-1,Q_D)}
+ SETUP_HOLD:
+   CLOCK LH = CLK_BUF
+   DATA(1) = D_BUF
+   SETUPTIME = {D_CLK_SETUP}
+   HOLDTIME =  {D_CLK_HOLD}
+   WHEN = {GSR_BUF == '0 }
+ WIDTH:
+   NODE = CLK
+   MIN_HI = {CLK_WIDTH}
+   MIN_LO = {CLK_WIDTH}
+ WIDTH:
+   NODE = GSR
+   MIN_HI = {GSR_WIDTH}

.MODEL X4_INFF_Q UEFF (
+  TPCLKQLHMN={Q_D} TPCLKQLHMX={Q_D}
+  TPCLKQHLMN={Q_D} TPCLKQHLMX={Q_D}
+  )

.ENDS X4_INFF

*$

.SUBCKT X4_ILD GSR PGSR GATE PGATE D Q
+ OPTIONAL:  DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: GSR_D=0 GATE_D=0 D_D=0 Q_D=0
+   D_GATE_SETUP=0       D_GATE_HOLD=0
+   GSR_GATE_SETUP=0     GSR_GATE_HOLD=0
+   GATE_WIDTH=0 GSR_WIDTH=0


UD BUF DPWR DGND
+ D  D_BUF
+ X4_INLAT_D 
+ IO_X4000

.MODEL X4_INLAT_D UGATE (
+   TPLHMN={D_D} TPLHMX={D_D}
+   TPHLMN={D_D} TPHLMX={D_D}
+   )

UGATE NXOR DPWR DGND
+ GATE PGATE GATE_BUF
+ X4_INLAT_GATE 
+ IO_X4000

.MODEL X4_INLAT_GATE UGATE (
+   TPLHMN={GATE_D} TPLHMX={GATE_D}
+   TPHLMN={GATE_D} TPHLMX={GATE_D}
+   )

UGSR NXOR DPWR DGND
+ GSR PGSR  GSR_BUF
+ X4_INLAT_GSR 
+ IO_X4000

.MODEL X4_INLAT_GSR UGATE (
+   TPLHMN={GSR_D} TPLHMX={GSR_D}
+   TPHLMN={GSR_D} TPHLMX={GSR_D}
+   )

UDLAT DLTCH(1) DPWR DGND
+ $D_HI GSR_BUF GATE_BUF D_BUF Q_INT $D_NC
+ D0_GFF
+ IO_X4000

UDELAY PINDLY(1,0,5) DPWR DGND
+ Q_INT
+ GATE GATE_BUF D_BUF GSR GSR_BUF
+ Q
+ IO_X4000
+ PINDLY:
+   Q = {DELAY(Q_D,-1,Q_D)}
+ SETUP_HOLD:
+   CLOCK LH = GATE_BUF
+   DATA(1) = D_BUF
+   SETUPTIME = {D_GATE_SETUP}
+   HOLDTIME =  {D_GATE_HOLD}
+   WHEN = {GSR_BUF == '1 }
+ WIDTH:
+   NODE = GATE
+   MIN_HI = {GATE_WIDTH}
+   MIN_LO = {GATE_WIDTH}
+ WIDTH:
+   NODE = GSR
+   MIN_HI = {GSR_WIDTH}

.MODEL X4_INLAT_Q UGFF (
+  TPGQLHMN={Q_D} TPGQLHMX={Q_D}
+  TPGQHLMN={Q_D} TPGQHLMX={Q_D}
+  )

.ENDS X4_ILD

*$

.SUBCKT X4_ILDI GSR PGSR GATE PGATE D Q
+ OPTIONAL:  DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: GSR_D=0 GATE_D=0 D_D=0 Q_D=0
+   D_GATE_SETUP=0       D_GATE_HOLD=0
+   GSR_GATE_SETUP=0     GSR_GATE_HOLD=0
+   GATE_WIDTH=0 GSR_WIDTH=0


UD INV DPWR DGND
+ D  D_BUF
+ X4_INLAT_D 
+ IO_X4000

.MODEL X4_INLAT_D UGATE (
+   TPLHMN={D_D} TPLHMX={D_D}
+   TPHLMN={D_D} TPHLMX={D_D}
+   )

UGATE NXOR DPWR DGND
+ GATE PGATE GATE_BUF
+ X4_INLAT_GATE 
+ IO_X4000

.MODEL X4_INLAT_GATE UGATE (
+   TPLHMN={GATE_D} TPLHMX={GATE_D}
+   TPHLMN={GATE_D} TPHLMX={GATE_D}
+   )

UGSR NXOR DPWR DGND
+ GSR PGSR  GSR_BUF
+ X4_INLAT_GSR 
+ IO_X4000

.MODEL X4_INLAT_GSR UGATE (
+   TPLHMN={GSR_D} TPLHMX={GSR_D}
+   TPHLMN={GSR_D} TPHLMX={GSR_D}
+   )

UDLAT DLTCH(1) DPWR DGND
+ $D_HI GSR_BUF GATE_BUF D_BUF $D_NC Q_INT
+ D0_GFF
+ IO_X4000

UDELAY PINDLY(1,0,5) DPWR DGND
+ Q_INT
+ GATE GATE_BUF D_BUF GSR GSR_BUF
+ Q
+ IO_X4000
+ PINDLY:
+   Q = {DELAY(Q_D,-1,Q_D)}
+ SETUP_HOLD:
+   CLOCK LH = GATE_BUF
+   DATA(1) = D_BUF
+   SETUPTIME = {D_GATE_SETUP}
+   HOLDTIME =  {D_GATE_HOLD}
+   WHEN = {GSR_BUF == '1 }
+ WIDTH:
+   NODE = GATE
+   MIN_HI = {GATE_WIDTH}
+   MIN_LO = {GATE_WIDTH}
+ WIDTH:
+   NODE = GSR
+   MIN_HI = {GSR_WIDTH}

.MODEL X4_INLAT_Q UGFF (
+  TPGQLHMN={Q_D} TPGQLHMX={Q_D}
+  TPGQHLMN={Q_D} TPGQHLMX={Q_D}
+  )

.ENDS X4_ILDI

*$

.SUBCKT X4_ROM16X1 A0 A1 A2 A3  O
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ TEXT: INITDATA=DEFAULT.ROM
+ PARAMS: A0_D=0 A1_D=0 A2_D=0 A3_D=0 O_D=0 ROM_DATA=0

UA0 BUF DPWR DGND
+ A0 A0_BUF
+ X4_ROM16X1_A0
+ IO_X4000

.MODEL X4_ROM16X1_A0 UGATE (
+   TPLHMN={A0_D} TPLHMX={A0_D}
+   TPHLMN={A0_D} TPHLMX={A0_D}
+   )

UA1 BUF DPWR DGND
+ A1 A1_BUF
+ X4_ROM16X1_A1
+ IO_X4000

.MODEL X4_ROM16X1_A1 UGATE (
+   TPLHMN={A1_D} TPLHMX={A1_D}
+   TPHLMN={A1_D} TPHLMX={A1_D}
+   )

UA2 BUF DPWR DGND
+ A2 A2_BUF
+ X4_ROM16X1_A2
+ IO_X4000

.MODEL X4_ROM16X1_A2 UGATE (
+   TPLHMN={A2_D} TPLHMX={A2_D}
+   TPHLMN={A2_D} TPHLMX={A2_D}
+   )

UA3 BUF DPWR DGND
+ A3 A3_BUF
+ X4_ROM16X1_A3
+ IO_X4000

.MODEL X4_ROM16X1_A3 UGATE (
+   TPLHMN={A3_D} TPLHMX={A3_D}
+   TPHLMN={A3_D} TPHLMX={A3_D}
+   )

UROM ROM(4,1) DPWR DGND
+ $D_HI A3_BUF A2_BUF A1_BUF A0_BUF
+ OUT
+ X4_ROM16X1_ROM
+ IO_X4000
+ FILE=|INITDATA|

UOUT BUF DPWR DGND
+ OUT O
+ D0_GATE
+ IO_X4000

.MODEL X4_ROM16X1_ROM UROM (
+   TPADHMN={O_D} TPADHMX={O_D}
+   TPADLMN={O_D} TPADLMX={O_D}
+   )

.ENDS X4_ROM16X1

*$

.SUBCKT X4_ROM32X1 A0 A1 A2 A3 A4  O
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ TEXT: INITDATA=DEFAULT.ROM
+ PARAMS: A0_D=0 A1_D=0 A2_D=0 A3_D=0 A4_D=0 O_D=0 ROM_DATA=0

UA0 BUF DPWR DGND
+ A0 A0_BUF
+ X4_ROM32X1_A0
+ IO_X4000

.MODEL X4_ROM32X1_A0 UGATE (
+   TPLHMN={A0_D} TPLHMX={A0_D}
+   TPHLMN={A0_D} TPHLMX={A0_D}
+   )

UA1 BUF DPWR DGND
+ A1 A1_BUF
+ X4_ROM32X1_A1
+ IO_X4000

.MODEL X4_ROM32X1_A1 UGATE (
+   TPLHMN={A1_D} TPLHMX={A1_D}
+   TPHLMN={A1_D} TPHLMX={A1_D}
+   )

UA2 BUF DPWR DGND
+ A2 A2_BUF
+ X4_ROM32X1_A2
+ IO_X4000

.MODEL X4_ROM32X1_A2 UGATE (
+   TPLHMN={A2_D} TPLHMX={A2_D}
+   TPHLMN={A2_D} TPHLMX={A2_D}
+   )

UA3 BUF DPWR DGND
+ A3 A3_BUF
+ X4_ROM32X1_A3
+ IO_X4000

.MODEL X4_ROM32X1_A3 UGATE (
+   TPLHMN={A3_D} TPLHMX={A3_D}
+   TPHLMN={A3_D} TPHLMX={A3_D}
+   )

UA4 BUF DPWR DGND
+ A4 A4_BUF
+ X4_ROM32X1_A4
+ IO_X4000

.MODEL X4_ROM32X1_A4 UGATE (
+   TPLHMN={A4_D} TPLHMX={A4_D}
+   TPHLMN={A4_D} TPHLMX={A4_D}
+   )

UROM ROM(5,1) DPWR DGND
+ $D_HI A4_BUF A3_BUF A2_BUF A1_BUF A0_BUF
+ OUT
+ X4_ROM32X1_ROM
+ IO_X4000
+ FILE=|INITDATA|

UOUT BUF DPWR DGND
+ OUT O
+ D0_GATE
+ IO_X4000

.MODEL X4_ROM32X1_ROM UROM (
+   TPADHMN={O_D} TPADHMX={O_D}
+   TPADLMN={O_D} TPADLMX={O_D}
+   )

.ENDS X4_ROM32X1

*$

.SUBCKT X4_RAM16X1 A0 A1 A2 A3 D WE HGSR O
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: A0_D=0 A1_D=0 A2_D=0 A3_D=0 O_D=0
+  D_D=0 WE_RISED=0  WE_FALLD=0
+  D_WE_SETUP=0  D_WE_HOLD=0
+  A0_WE_SETUP=0  A0_WE_HOLD=0  A1_WE_SETUP=0  A1_WE_HOLD=0
+  A2_WE_SETUP=0  A2_WE_HOLD=0  A3_WE_SETUP=0  A3_WE_HOLD=0
+  WE_WIDTH=0

UA0 BUF DPWR DGND
+ A0 A0_BUF
+ X4_RAM16X1_A0
+ IO_X4000

.MODEL X4_RAM16X1_A0 UGATE (
+   TPLHMN={A0_D} TPLHMX={A0_D}
+   TPHLMN={A0_D} TPHLMX={A0_D}
+   )

UA1 BUF DPWR DGND
+ A1 A1_BUF
+ X4_RAM16X1_A1
+ IO_X4000

.MODEL X4_RAM16X1_A1 UGATE (
+   TPLHMN={A1_D} TPLHMX={A1_D}
+   TPHLMN={A1_D} TPHLMX={A1_D}
+   )

UA2 BUF DPWR DGND
+ A2 A2_BUF
+ X4_RAM16X1_A2
+ IO_X4000

.MODEL X4_RAM16X1_A2 UGATE (
+   TPLHMN={A2_D} TPLHMX={A2_D}
+   TPHLMN={A2_D} TPHLMX={A2_D}
+   )

UA3 BUF DPWR DGND
+ A3 A3_BUF
+ X4_RAM16X1_A3
+ IO_X4000

.MODEL X4_RAM16X1_A3 UGATE (
+   TPLHMN={A3_D} TPLHMX={A3_D}
+   TPHLMN={A3_D} TPHLMX={A3_D}
+   )

UDATA BUF DPWR DGND
+ D D_BUF
+ X4_RAM16X1_D
+ IO_X4000

.MODEL X4_RAM16X1_D UGATE (
+   TPLHMN={D_D} TPLHMX={D_D}
+   TPHLMN={D_D} TPHLMX={D_D}
+   )

UX0 OR(2) DPWR DGND
+ ATA0 ATB0  DATA_OUT
+ D0_GATE
+ IO_X4000
UAB0 AND(2) DPWR DGND
+ WE_BUF LAT_OUT  ATA0
+ D0_GATE
+ IO_X4000
UAB1 AND(2) DPWR DGND
+ WE_BAR RAM_OUT  ATB0
+ D0_GATE
+ IO_X4000

UWENABLE BUF DPWR DGND
+ WE WE_BUF
+ X4_RAM16X1_WE
+ IO_X4000
UWENABLEBAR INV DPWR DGND
+ WE_BUF WE_BAR
+ D0_GATE
+ IO_X4000
.MODEL X4_RAM16X1_WE UGATE (
+   TPLHMN={WE_RISED} TPLHMX={WE_RISED}
+   TPHLMN={WE_FALLD} TPHLMX={WE_FALLD}
+   )

UCLKPULSE BUF DPWR DGND
+ WE_BUF  WE_DLY
+ X4_RAM16X1_WEPULSEWIDTH
+ IO_X4000

.MODEL X4_RAM16X1_UEFF UEFF ()
.MODEL X4_RAM16X1_UGFF UGFF ()

.MODEL X4_RAM16X1_WEPULSEWIDTH UGATE (
+   TPLHMN=0.1ns TPLHMX=0.1ns
+   TPHLMN=0.1ns TPHLMX=0.1ns
+   )

UCLR AND(2) DPWR DGND
+ WE_BAR WE_DLY  WEPULSE
+ D0_GATE
+ IO_X4000

UGSR INV DPWR DGND
+ HGSR HGSRBAR
+ D0_GATE
+ IO_X4000

UDLAT DLTCH(1) DPWR DGND
+ $D_HI HGSRBAR WE_BUF D_BUF LAT_OUT $D_NC
+ X4_RAM16X1_UGFF
+ IO_X4000


URAM RAM(4,1) DPWR DGND
+ $D_HI  WEPULSE
+ A3_BUF A2_BUF A1_BUF A0_BUF
+ D_BUF
+ RAM_OUT
+ X4_RAM16X1_RAM_OUT
+ IO_X4000

.MODEL X4_RAM16X1_RAM_OUT URAM ()

UDELAY PINDLY(1,0,6) DPWR DGND
+ DATA_OUT
+ WE D A0_BUF A1_BUF A2_BUF A3_BUF
+ O
+ IO_X4000
+ PINDLY:
+   O = {DELAY(O_D,-1,O_D)}
+ SETUP_HOLD:
+   CLOCK LH = WE
+   DATA(1) = A0_BUF
+   SETUPTIME = {A0_WE_SETUP}
+ SETUP_HOLD:
+   CLOCK LH = WE
+   DATA(1) = A1_BUF
+   SETUPTIME = {A1_WE_SETUP}
+ SETUP_HOLD:
+   CLOCK LH = WE
+   DATA(1) = A2_BUF
+   SETUPTIME = {A2_WE_SETUP}
+ SETUP_HOLD:
+   CLOCK LH = WE
+   DATA(1) = A3_BUF
+   SETUPTIME = {A3_WE_SETUP}
+ SETUP_HOLD:
+   CLOCK LH = WE
+   DATA(1) = D
+   SETUPTIME = {D_WE_SETUP}
+ SETUP_HOLD:
+   CLOCK HL = WE
+   DATA(1) = A0_BUF
+   HOLDTIME =  {A0_WE_HOLD}
+ SETUP_HOLD:
+   CLOCK HL = WE
+   DATA(1) = A1_BUF
+   HOLDTIME =  {A1_WE_HOLD}
+ SETUP_HOLD:
+   CLOCK HL = WE
+   DATA(1) = A2_BUF
+   HOLDTIME =  {A2_WE_HOLD}
+ SETUP_HOLD:
+   CLOCK HL = WE
+   DATA(1) = A3_BUF
+   HOLDTIME =  {A3_WE_HOLD}
+ SETUP_HOLD:
+   CLOCK HL = WE
+   DATA(1) = D
+   HOLDTIME =  {D_WE_HOLD}
+ WIDTH:
+   NODE = WE
+   MIN_HI = {WE_WIDTH}

.ENDS X4_RAM16X1

*$

.SUBCKT X4_RAM32X1 A0 A1 A2 A3 A4 D WE HGSR O
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: A0_D=0 A1_D=0 A2_D=0 A3_D=0 A4_D=0 O_D=0
+  D_D=0 WE_RISED=0  WE_FALLD=0
+  D_WE_SETUP=0  D_WE_HOLD=0
+  A0_WE_SETUP=0  A0_WE_HOLD=0  A1_WE_SETUP=0  A1_WE_HOLD=0
+  A2_WE_SETUP=0  A2_WE_HOLD=0  A3_WE_SETUP=0  A3_WE_HOLD=0 
+  A4_WE_SETUP=0  A4_WE_HOLD=0
+  WE_WIDTH=0

UA0 BUF DPWR DGND
+ A0 A0_BUF
+ X4_RAM32X1_A0
+ IO_X4000

.MODEL X4_RAM32X1_A0 UGATE (
+   TPLHMN={A0_D} TPLHMX={A0_D}
+   TPHLMN={A0_D} TPHLMX={A0_D}
+   )

UA1 BUF DPWR DGND
+ A1 A1_BUF
+ X4_RAM32X1_A1
+ IO_X4000

.MODEL X4_RAM32X1_A1 UGATE (
+   TPLHMN={A1_D} TPLHMX={A1_D}
+   TPHLMN={A1_D} TPHLMX={A1_D}
+   )

UA2 BUF DPWR DGND
+ A2 A2_BUF
+ X4_RAM32X1_A2
+ IO_X4000

.MODEL X4_RAM32X1_A2 UGATE (
+   TPLHMN={A2_D} TPLHMX={A2_D}
+   TPHLMN={A2_D} TPHLMX={A2_D}
+   )

UA3 BUF DPWR DGND
+ A3 A3_BUF
+ X4_RAM32X1_A3
+ IO_X4000

.MODEL X4_RAM32X1_A3 UGATE (
+   TPLHMN={A3_D} TPLHMX={A3_D}
+   TPHLMN={A3_D} TPHLMX={A3_D}
+   )

UA4 BUF DPWR DGND
+ A4 A4_BUF
+ X4_RAM32X1_A4
+ IO_X4000

.MODEL X4_RAM32X1_A4 UGATE (
+   TPLHMN={A4_D} TPLHMX={A4_D}
+   TPHLMN={A4_D} TPHLMX={A4_D}
+   )

UDATA BUF DPWR DGND
+ D D_BUF
+ X4_RAM32X1_D
+ IO_X4000

.MODEL X4_RAM32X1_D UGATE (
+   TPLHMN={D_D} TPLHMX={D_D}
+   TPHLMN={D_D} TPHLMX={D_D}
+   )

UX0 OR(2) DPWR DGND
+ ATA0 ATB0  DATA_OUT
+ D0_GATE
+ IO_X4000
UAB0 AND(2) DPWR DGND
*+ WE_BUF LAT_OUT  ATA0
+ WE LAT_OUT  ATA0
+ D0_GATE
+ IO_X4000
UAB1 AND(2) DPWR DGND
+ WE_BAR RAM_OUT  ATB0
+ D0_GATE
+ IO_X4000

UWENABLE BUF DPWR DGND
+ WE WE_BUF
+ X4_RAM32X1_WE
+ IO_X4000
UWENABLEBAR INV DPWR DGND
*+ WE_BUF WE_BAR
+ WE WE_BAR
+ D0_GATE
+ IO_X4000
.MODEL X4_RAM32X1_WE UGATE (
+   TPLHMN={WE_RISED} TPLHMX={WE_RISED}
+   TPHLMN={WE_FALLD} TPHLMX={WE_FALLD}
+   )

UCLKPULSE BUF DPWR DGND
+ WE_BUF  WE_DLY
+ X4_RAM32X1_WEPULSEWIDTH
+ IO_X4000

.MODEL X4_RAM32X1_UEFF UEFF ()
.MODEL X4_RAM32X1_UGFF UGFF ()

.MODEL X4_RAM32X1_WEPULSEWIDTH UGATE (
+   TPLHMN=0.1ns TPLHMX=0.1ns
+   TPHLMN=0.1ns TPHLMX=0.1ns
+   )

UCLR AND(2) DPWR DGND
+ WE_BAR WE_DLY  WEPULSE
+ D0_GATE
+ IO_X4000

UGSR INV DPWR DGND
+ HGSR HGSRBAR
+ D0_GATE
+ IO_X4000

URD INV DPWR DGND
+ WEPULSE WEPULSEBAR
+ D0_GATE
+ IO_X4000

UDLAT DLTCH(1) DPWR DGND
+ $D_HI HGSRBAR WE_BUF D_BUF LAT_OUT $D_NC
+ X4_RAM32X1_UGFF
+ IO_X4000

URAM RAM(5,1) DPWR DGND
+ WEPULSEBAR  WEPULSE
+ A4_BUF A3_BUF A2_BUF A1_BUF A0_BUF
+ D_BUF
+ RAM_OUT
+ X4_RAM32X1_RAM_OUT
+ IO_X4000

.MODEL X4_RAM32X1_RAM_OUT URAM ()

UDELAY PINDLY(1,0,7) DPWR DGND
+ DATA_OUT
+ WE D A0_BUF A1_BUF A2_BUF A3_BUF A4_BUF
+ O
+ IO_X4000
+ PINDLY:
+   O = {DELAY(O_D,-1,O_D)}
+ SETUP_HOLD:
+   CLOCK LH = WE
+   DATA(1) = A0_BUF
+   SETUPTIME = {A0_WE_SETUP}
+ SETUP_HOLD:
+   CLOCK LH = WE
+   DATA(1) = A1_BUF
+   SETUPTIME = {A1_WE_SETUP}
+ SETUP_HOLD:
+   CLOCK LH = WE
+   DATA(1) = A2_BUF
+   SETUPTIME = {A2_WE_SETUP}
+ SETUP_HOLD:
+   CLOCK LH = WE
+   DATA(1) = A3_BUF
+   SETUPTIME = {A3_WE_SETUP}
+ SETUP_HOLD:
+   CLOCK LH = WE
+   DATA(1) = A4_BUF
+   SETUPTIME = {A4_WE_SETUP}
+ SETUP_HOLD:
+   CLOCK LH = WE
+   DATA(1) = D
+   SETUPTIME = {D_WE_SETUP}
+ SETUP_HOLD:
+   CLOCK HL = WE
+   DATA(1) = A0_BUF
+   HOLDTIME =  {A0_WE_HOLD}
+ SETUP_HOLD:
+   CLOCK HL = WE
+   DATA(1) = A1_BUF
+   HOLDTIME =  {A1_WE_HOLD}
+ SETUP_HOLD:
+   CLOCK HL = WE
+   DATA(1) = A2_BUF
+   HOLDTIME =  {A2_WE_HOLD}
+ SETUP_HOLD:
+   CLOCK HL = WE
+   DATA(1) = A3_BUF
+   HOLDTIME =  {A3_WE_HOLD}
+ SETUP_HOLD:
+   CLOCK HL = WE
+   DATA(1) = A4_BUF
+   HOLDTIME =  {A4_WE_HOLD}
+ SETUP_HOLD:
+   CLOCK HL = WE
+   DATA(1) = D
+   HOLDTIME =  {D_WE_HOLD}
+ WIDTH:
+   NODE = WE
+   MIN_HI = {WE_WIDTH}

.ENDS X4_RAM32X1

*$

.SUBCKT X4_WAND IN OUT IN_DLY
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: IN_D=0 OUT_D=0

UIN BUF DPWR DGND
+ IN IN_DLY
+ X4_WAND_IN
+ IO_X4000

.MODEL X4_WAND_IN UGATE (
+  TPLHMN={IN_D} TPHLMN={IN_D}
+  TPLHMX={IN_D} TPHLMX={IN_D}
+  )

UENB INV DPWR DGND
+ IN_DLY ENB_BUF
+ D0_GATE
+ IO_X4000

UOUT BUF3 DPWR DGND
+ IN_DLY ENB_BUF  OUT
+ X4_WAND_OUT
+ IO_X4000

.MODEL X4_WAND_OUT UTGATE (
+  TPLHMN={OUT_D} TPHLMN={OUT_D}
+  TPLHMX={OUT_D} TPHLMX={OUT_D}
+  TPLZMN={OUT_D} TPHZMN={OUT_D}
+  TPLZMX={OUT_D} TPHZMX={OUT_D}
+  TPZLMN={OUT_D} TPZHMN={OUT_D}
+  TPZLMX={OUT_D} TPZHMX={OUT_D}
+  )


.ENDS X4_WAND

*$

.SUBCKT X4_WORAND I0 I1 OUT I0ORI1_DLY
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: I0_D=0 I1_D=0  OUT_D=0

UIN0 BUF DPWR DGND
+ I0 I0_BUF
+ X4_WORAND_I0
+ IO_X4000

.MODEL X4_WORAND_I0 UGATE (
+  TPLHMN={I0_D} TPHLMN={I0_D}
+  TPLHMX={I0_D} TPHLMX={I0_D}
+  )

UIN1 BUF DPWR DGND
+ I1 I1_BUF
+ X4_WORAND_I1
+ IO_X4000

.MODEL X4_WORAND_I1 UGATE (
+  TPLHMN={I1_D} TPHLMN={I1_D}
+  TPLHMX={I1_D} TPHLMX={I1_D}
+  )

UENBDLY OR(2) DPWR DGND
+ I0_BUF I1_BUF  I0ORI1_DLY
+ D0_GATE
+ IO_X4000


UOUT BUF3 DPWR DGND
+ IN_BUF I0ORI1_DLY OUT
+ X4_WORAND_OUT
+ IO_X4000

.MODEL X4_WORAND_OUT UTGATE (
+  TPLHMN={OUT_D} TPHLMN={OUT_D}
+  TPLHMX={OUT_D} TPHLMX={OUT_D}
+  TPLZMN={OUT_D} TPHZMN={OUT_D}
+  TPLZMX={OUT_D} TPHZMX={OUT_D}
+  TPZLMN={OUT_D} TPZHMN={OUT_D}
+  TPZLMX={OUT_D} TPZHMX={OUT_D}
+  )

.ENDS X4_WORAND

*$

.SUBCKT X4_OSC4 F8M F500K F16K F490 F15
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS

UF8M STIM(1,1) DPWR DGND
+ F8M
+ IO_X4000
+   +0s 0
+   +62.5ns 1
+   Repeat Forever
+      +62.5ns 0
+      +62.5ns 1
+   EndRepeat

UF500K STIM(1,1) DPWR DGND
+ F500K
+ IO_X4000
+   +0s 0
+   +1us 1
+   Repeat Forever
+      +1us 0
+      +1us 1
+   EndRepeat

UF16K STIM(1,1) DPWR DGND
+ F16K
+ IO_X4000
+   +0s 0
+   +31.25us 1
+   Repeat Forever
+      +31.25us 0
+      +31.25us 1
+   EndRepeat

UF490 STIM(1,1) DPWR DGND
+ F490
+ IO_X4000
+   +0s 0
+   +1.02040ms 1
+   Repeat Forever
+      +1.02040ms 0
+      +1.02040ms 1
+   EndRepeat

UF15 STIM(1,1) DPWR DGND
+ F15
+ IO_X4000
+   +0s 0
+   +33.3333ms 1
+   Repeat Forever
+      +33.3333ms 0
+      +33.3333ms 1
+   EndRepeat

.ENDS X4_OSC4

*$

.SUBCKT X4_BSCAN TDI TMS TCK TDO1 TDO2 TDO DRCK IDLE SEL1 SEL2
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS

UTDI BUF DPWR DGND
+ TDI $D_NC
+ D0_GATE
+ IO_X4000
UTMS BUF DPWR DGND
+ TMS $D_NC
+ D0_GATE
+ IO_X4000
UTCK BUF DPWR DGND
+ TDI $D_NC
+ D0_GATE
+ IO_X4000
UTDO1 BUF DPWR DGND
+ TDO1 $D_NC
+ D0_GATE
+ IO_X4000
UTDO2 BUF DPWR DGND
+ TDO2 $D_NC
+ D0_GATE
+ IO_X4000

UTDO PULLUP(1) DPWR DGND
+ TDO
+ IO_X4000

UPULDN PULLDN(4) DPWR DGND
+ DRCK IDLE SEL1 SEL2
+ IO_X4000

.ENDS X4_BSCAN

*$

.SUBCKT X4_PULLUP SIG ENB PENB
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS
+ PARAMS: PULLUP_D=0

.MODEL BTG1 UBTG

.MODEL ENB_GATE UGATE
+  TPLHMN={PULLUP_D} TPHLMN={PULLUP_D} 
+  TPLHMX={PULLUP_D} TPHLMX={PULLUP_D} 
+  )

UEDLY XOR DPWR DGND
+ ENB PENB  ENBDLY
+ ENB_GATE
+ IO_X4000

UBTG NBTG DPWR DGND
+ ENBDLY PULLUPNODE SIG
+ BTG1 IO_X4000

U1 PULLUP(1) DPWR DGND
+ PULLUPNODE
+ IO_X4000_PULLUP

.ENDS X4_PULLUP

*$

.SUBCKT X4_PULLDOWN SIG
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS

U1 PULLDN(1) DPWR DGND
+ SIG
+ IO_X4000

.ENDS X4_PULLDOWN

*$

.SUBCKT X4_RDBK TRIG DATA RIP
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS

UTRIG BUF DPWR DGND
+ TRIG $D_NC
+ D0_GATE
+ IO_X4000

UPULDN PULLDN(2) DPWR DGND
+ DATA RIP
+ IO_X4000

.ENDS X4_RDBK

*$

.SUBCKT X4_STARTUP
+ GSR PGSR GTS PGTS CLK PCLK Q2 Q2P Q3 Q3P Q1Q4 PQ1Q4 DONEIN PDONEIN
+ OPTIONAL: DPWR=$G_X4000_VDD DGND=$G_X4000_VSS

UPULUP PULLUP(4) DPWR DGND
+ Q2 Q3 Q1Q4 DONEIN
+ IO_X4000

.ENDS X4_STARTUP

